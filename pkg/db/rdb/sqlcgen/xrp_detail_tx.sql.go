// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: xrp_detail_tx.sql

package sqlcgen

import (
	"context"
	"database/sql"
)

const getXrpDetailTxBlobList = `-- name: GetXrpDetailTxBlobList :many
SELECT xrp_detail_tx.tx_blob
FROM xrp_detail_tx
INNER JOIN tx ON tx.id = xrp_detail_tx.tx_id
WHERE tx.coin = ? AND xrp_detail_tx.current_tx_type = ?
`

type GetXrpDetailTxBlobListParams struct {
	Coin          TxCoin
	CurrentTxType int8
}

func (q *Queries) GetXrpDetailTxBlobList(ctx context.Context, arg GetXrpDetailTxBlobListParams) ([]string, error) {
	rows, err := q.db.QueryContext(ctx, getXrpDetailTxBlobList, arg.Coin, arg.CurrentTxType)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []string
	for rows.Next() {
		var tx_blob string
		if err := rows.Scan(&tx_blob); err != nil {
			return nil, err
		}
		items = append(items, tx_blob)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getXrpDetailTxByID = `-- name: GetXrpDetailTxByID :one
SELECT id, tx_id, uuid, current_tx_type, sender_account, sender_address, receiver_account, receiver_address, amount, xrp_tx_type, fee, flags, last_ledger_sequence, sequence, signing_pubkey, txn_signature, hash, earliest_ledger_version, signed_tx_id, tx_blob, sent_updated_at FROM xrp_detail_tx
WHERE id = ?
`

func (q *Queries) GetXrpDetailTxByID(ctx context.Context, id int64) (XrpDetailTx, error) {
	row := q.db.QueryRowContext(ctx, getXrpDetailTxByID, id)
	var i XrpDetailTx
	err := row.Scan(
		&i.ID,
		&i.TxID,
		&i.Uuid,
		&i.CurrentTxType,
		&i.SenderAccount,
		&i.SenderAddress,
		&i.ReceiverAccount,
		&i.ReceiverAddress,
		&i.Amount,
		&i.XrpTxType,
		&i.Fee,
		&i.Flags,
		&i.LastLedgerSequence,
		&i.Sequence,
		&i.SigningPubkey,
		&i.TxnSignature,
		&i.Hash,
		&i.EarliestLedgerVersion,
		&i.SignedTxID,
		&i.TxBlob,
		&i.SentUpdatedAt,
	)
	return i, err
}

const getXrpDetailTxsByTxID = `-- name: GetXrpDetailTxsByTxID :many
SELECT id, tx_id, uuid, current_tx_type, sender_account, sender_address, receiver_account, receiver_address, amount, xrp_tx_type, fee, flags, last_ledger_sequence, sequence, signing_pubkey, txn_signature, hash, earliest_ledger_version, signed_tx_id, tx_blob, sent_updated_at FROM xrp_detail_tx
WHERE tx_id = ?
`

func (q *Queries) GetXrpDetailTxsByTxID(ctx context.Context, txID int64) ([]XrpDetailTx, error) {
	rows, err := q.db.QueryContext(ctx, getXrpDetailTxsByTxID, txID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []XrpDetailTx
	for rows.Next() {
		var i XrpDetailTx
		if err := rows.Scan(
			&i.ID,
			&i.TxID,
			&i.Uuid,
			&i.CurrentTxType,
			&i.SenderAccount,
			&i.SenderAddress,
			&i.ReceiverAccount,
			&i.ReceiverAddress,
			&i.Amount,
			&i.XrpTxType,
			&i.Fee,
			&i.Flags,
			&i.LastLedgerSequence,
			&i.Sequence,
			&i.SigningPubkey,
			&i.TxnSignature,
			&i.Hash,
			&i.EarliestLedgerVersion,
			&i.SignedTxID,
			&i.TxBlob,
			&i.SentUpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const insertXrpDetailTx = `-- name: InsertXrpDetailTx :execresult
INSERT INTO xrp_detail_tx (
  tx_id, uuid, current_tx_type, sender_account, sender_address,
  receiver_account, receiver_address, amount, xrp_tx_type, fee,
  flags, last_ledger_sequence, sequence, signing_pubkey, txn_signature,
  hash, earliest_ledger_version, signed_tx_id, tx_blob, sent_updated_at
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
`

type InsertXrpDetailTxParams struct {
	TxID                  int64
	Uuid                  string
	CurrentTxType         int8
	SenderAccount         string
	SenderAddress         string
	ReceiverAccount       string
	ReceiverAddress       string
	Amount                string
	XrpTxType             string
	Fee                   string
	Flags                 uint64
	LastLedgerSequence    uint64
	Sequence              uint64
	SigningPubkey         string
	TxnSignature          string
	Hash                  string
	EarliestLedgerVersion uint64
	SignedTxID            string
	TxBlob                string
	SentUpdatedAt         sql.NullTime
}

func (q *Queries) InsertXrpDetailTx(ctx context.Context, arg InsertXrpDetailTxParams) (sql.Result, error) {
	return q.db.ExecContext(ctx, insertXrpDetailTx,
		arg.TxID,
		arg.Uuid,
		arg.CurrentTxType,
		arg.SenderAccount,
		arg.SenderAddress,
		arg.ReceiverAccount,
		arg.ReceiverAddress,
		arg.Amount,
		arg.XrpTxType,
		arg.Fee,
		arg.Flags,
		arg.LastLedgerSequence,
		arg.Sequence,
		arg.SigningPubkey,
		arg.TxnSignature,
		arg.Hash,
		arg.EarliestLedgerVersion,
		arg.SignedTxID,
		arg.TxBlob,
		arg.SentUpdatedAt,
	)
}

const updateXrpDetailTxAfterSent = `-- name: UpdateXrpDetailTxAfterSent :execresult
UPDATE xrp_detail_tx
SET current_tx_type = ?, signed_tx_id = ?, tx_blob = ?,
    earliest_ledger_version = ?, sent_updated_at = ?
WHERE uuid = ?
`

type UpdateXrpDetailTxAfterSentParams struct {
	CurrentTxType         int8
	SignedTxID            string
	TxBlob                string
	EarliestLedgerVersion uint64
	SentUpdatedAt         sql.NullTime
	Uuid                  string
}

func (q *Queries) UpdateXrpDetailTxAfterSent(ctx context.Context, arg UpdateXrpDetailTxAfterSentParams) (sql.Result, error) {
	return q.db.ExecContext(ctx, updateXrpDetailTxAfterSent,
		arg.CurrentTxType,
		arg.SignedTxID,
		arg.TxBlob,
		arg.EarliestLedgerVersion,
		arg.SentUpdatedAt,
		arg.Uuid,
	)
}

const updateXrpDetailTxType = `-- name: UpdateXrpDetailTxType :execresult
UPDATE xrp_detail_tx
SET current_tx_type = ?
WHERE id = ?
`

type UpdateXrpDetailTxTypeParams struct {
	CurrentTxType int8
	ID            int64
}

func (q *Queries) UpdateXrpDetailTxType(ctx context.Context, arg UpdateXrpDetailTxTypeParams) (sql.Result, error) {
	return q.db.ExecContext(ctx, updateXrpDetailTxType, arg.CurrentTxType, arg.ID)
}

const updateXrpDetailTxTypeBySentHash = `-- name: UpdateXrpDetailTxTypeBySentHash :execresult
UPDATE xrp_detail_tx
SET current_tx_type = ?
WHERE tx_blob = ?
`

type UpdateXrpDetailTxTypeBySentHashParams struct {
	CurrentTxType int8
	TxBlob        string
}

func (q *Queries) UpdateXrpDetailTxTypeBySentHash(ctx context.Context, arg UpdateXrpDetailTxTypeBySentHashParams) (sql.Result, error) {
	return q.db.ExecContext(ctx, updateXrpDetailTxTypeBySentHash, arg.CurrentTxType, arg.TxBlob)
}
